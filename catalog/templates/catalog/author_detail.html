{% extends "base.html" %}

{% block content %}
  <h1>{{ author.last_name }}, {{ author.first_name }}</h1>

  <p>Born: {{ author.born }}</p>
  {% if author.died %}<p>Died: {{ author.died }}</p>{% endif %}

  <div style="margin-left:20px;margin-top:20px">
    <h4>Books</h4>
    <hr>
    {# a model.submodel_set is constructed for if the foreign key only goes one way #}
    {% for book in author.book_set.all %}
      <li><a href="{{ book.get_absolute_url }}">{{ book.title }}, {{ book.published }}</a></li>
    {% endfor %}
    {% if perms.catalog.change_author %}<a href="{% url 'author-update' author.pk %}">Update this author</a>{% endif %}
    {% if perms.catalog.delete_author %}<a href="{% url 'author-delete' author.pk %}">Delete this author</a>{% endif %}
  </div>
{% endblock %}